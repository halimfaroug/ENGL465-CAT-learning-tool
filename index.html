<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAT Mastery Platform - Interactive Learning for Translation Students</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://unpkg.com/react-flow-renderer@9/dist/umd/ReactFlow.umd.js"></script>
    <style>
        :root {
            --neon-blue: #6EC1E4;
            --neon-purple: #B57EDC;
            --neon-green: #7FFFD4;
            --neon-pink: #FFB6C1;
            --dark-bg: #0f172a;
            --card-bg: rgba(30, 41, 59, 0.8);
        }
        
        * {
            transition: all 0.3s ease;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            min-height: 100vh;
            color: #e2e8f0;
            overflow-x: hidden;
        }
        
        h1, h2, h3, h4, h5 {
            font-family: 'Poppins', sans-serif;
            font-weight: 700;
        }
        
        .neon-blue { color: var(--neon-blue); }
        .neon-purple { color: var(--neon-purple); }
        .neon-green { color: var(--neon-green); }
        .neon-pink { color: var(--neon-pink); }
        
        .gradient-text {
            background: linear-gradient(90deg, var(--neon-blue), var(--neon-purple));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .glass-card {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(110, 193, 228, 0.2);
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .glow-effect {
            position: relative;
        }
        
        .glow-effect::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 16px;
            background: linear-gradient(90deg, transparent, rgba(110, 193, 228, 0.1), transparent);
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .glow-effect:hover::after {
            opacity: 1;
        }
        
        .floating {
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(110, 193, 228, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(110, 193, 228, 0); }
            100% { box-shadow: 0 0 0 0 rgba(110, 193, 228, 0); }
        }
        
        .progress-ring {
            transform: rotate(-90deg);
        }
        
        .progress-ring-circle {
            transition: stroke-dashoffset 0.5s;
            stroke-linecap: round;
        }
        
        .badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            margin: 4px;
        }
        
        .badge-bronze {
            background: linear-gradient(135deg, #CD7F32, #B87333);
            box-shadow: 0 0 10px rgba(205, 127, 50, 0.5);
        }
        
        .badge-silver {
            background: linear-gradient(135deg, #C0C0C0, #A8A8A8);
            box-shadow: 0 0 10px rgba(192, 192, 192, 0.5);
        }
        
        .badge-gold {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }
        
        .badge-platinum {
            background: linear-gradient(135deg, #E5E4E2, #C0C0C0);
            box-shadow: 0 0 10px rgba(229, 228, 226, 0.5);
        }
        
        .mindmap-node {
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .mindmap-node:hover {
            transform: scale(1.05);
        }
        
        .matecat-simulation {
            background: linear-gradient(135deg, #1e3a8a, #0f172a);
            border: 2px solid #3b82f6;
        }
        
        .typewriter {
            overflow: hidden;
            border-right: 2px solid var(--neon-blue);
            white-space: nowrap;
            animation: typing 3.5s steps(40, end), blink-caret 0.75s step-end infinite;
        }
        
        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }
        
        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: var(--neon-blue) }
        }
        
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        
        .developer-credit {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(15, 23, 42, 0.95);
            border: 2px solid var(--neon-blue);
            border-radius: 12px;
            padding: 12px 20px;
            font-size: 13px;
            box-shadow: 0 0 20px rgba(110, 193, 228, 0.5);
            z-index: 1000;
            backdrop-filter: blur(10px);
        }
        
        .matecat-toolbar {
            background: linear-gradient(90deg, #1e40af, #1e3a8a);
            border-radius: 8px;
            padding: 10px;
        }
        
        .highlight {
            background: linear-gradient(90deg, transparent, rgba(110, 193, 228, 0.2), transparent);
            padding: 2px 8px;
            border-radius: 4px;
        }
        
        .neon-border {
            border: 2px solid transparent;
            background: linear-gradient(var(--card-bg), var(--card-bg)) padding-box,
                        linear-gradient(90deg, var(--neon-blue), var(--neon-purple)) border-box;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <div class="developer-credit">
        <p class="neon-blue font-semibold text-sm">üíª Developed by</p>
        <p class="neon-green font-bold text-base">Halim Faroug A. Elhag</p>
        <p class="text-xs text-gray-400">Lecturer of English Language, UHB/UofK</p>
    </div>

    <script type="text/babel">
        const { useState, useEffect, useCallback, useRef } = React;
        const ReactFlow = window.ReactFlow;

        // Expanded course data with mindmaps, practical exercises, and case studies
        const courseData = {
            // Topics remain the same as before
            topics: [
                { id: 1, name: "Introduction to CAT", color: "#6EC1E4", icon: "üöÄ" },
                { id: 2, name: "Translator's Workstation", color: "#B57EDC", icon: "üíª" },
                { id: 3, name: "Translation Memory Systems", color: "#7FFFD4", icon: "üíæ" },
                { id: 4, name: "Terminology Tools", color: "#FFB6C1", icon: "üìö" },
                { id: 5, name: "Localization & Translation", color: "#6EC1E4", icon: "üåç" },
                { id: 6, name: "Minority Languages", color: "#B57EDC", icon: "üó£Ô∏è" },
                { id: 7, name: "Corpora & Translation", color: "#7FFFD4", icon: "üìä" },
                { id: 8, name: "MT Challenges", color: "#FFB6C1", icon: "‚ö°" },
                { id: 9, name: "Linguistics in MT", color: "#6EC1E4", icon: "üî§" },
                { id: 10, name: "Commercial MT", color: "#B57EDC", icon: "üí∞" },
                { id: 11, name: "MT Evaluation", color: "#7FFFD4", icon: "üìà" },
                { id: 12, name: "Sublanguage", color: "#FFB6C1", icon: "üéØ" },
                { id: 13, name: "Post-Editing", color: "#6EC1E4", icon: "‚úèÔ∏è" },
                { id: 14, name: "MT in Classroom", color: "#B57EDC", icon: "üè´" }
            ],
            
            // 50 flashcards (already provided in your code)
            flashcards: [...], // Your existing 64 flashcards array
            
            // 25 quizzes (expanded selection)
            quizzes: [...], // Your existing 28 quizzes array
            
            // 30 Mindmaps - Interactive visual connections
            mindmaps: [
                {
                    id: 1,
                    title: "CAT Ecosystem Overview",
                    topic: 1,
                    nodes: [
                        { id: '1', type: 'input', data: { label: 'CAT Tools' }, position: { x: 250, y: 0 } },
                        { id: '2', data: { label: 'Translation Memory' }, position: { x: 100, y: 100 } },
                        { id: '3', data: { label: 'Terminology Management' }, position: { x: 400, y: 100 } },
                        { id: '4', data: { label: 'Quality Assurance' }, position: { x: 250, y: 200 } },
                        { id: '5', data: { label: 'Alignment Tools' }, position: { x: 100, y: 300 } },
                        { id: '6', data: { label: 'Project Management' }, position: { x: 400, y: 300 } }
                    ],
                    edges: [
                        { id: 'e1-2', source: '1', target: '2' },
                        { id: 'e1-3', source: '1', target: '3' },
                        { id: 'e2-4', source: '2', target: '4' },
                        { id: 'e3-4', source: '3', target: '4' },
                        { id: 'e4-5', source: '4', target: '5' },
                        { id: 'e4-6', source: '4', target: '6' }
                    ]
                },
                // Add 29 more mindmaps for other topics...
            ],
            
            // 10 Practical Exercises (Matecat Simulations)
            practicalExercises: [
                {
                    id: 1,
                    title: "Matecat Interface Familiarization",
                    topic: 2,
                    description: "Navigate the Matecat interface and identify key components",
                    steps: [
                        "Open Matecat simulation",
                        "Identify translation editor area",
                        "Locate translation memory panel",
                        "Find terminology management section",
                        "Explore quality assurance tools"
                    ],
                    simulation: true
                },
                // Add 9 more exercises...
            ],
            
            // 5 Case Studies
            caseStudies: [
                {
                    id: 1,
                    title: "Global Software Localization Project",
                    topic: 5,
                    scenario: "A tech company needs to localize their software into 12 languages",
                    challenges: [
                        "Consistent terminology across languages",
                        "Cultural adaptation of interface",
                        "Technical constraints in string length",
                        "Quality assurance at scale"
                    ],
                    solutions: [
                        "Implement centralized terminology database",
                        "Use CAT tools with TM integration",
                        "Apply pseudo-localization for testing",
                        "Establish reviewer workflow"
                    ]
                },
                // Add 4 more case studies...
            ],
            
            // Resource Library
            resources: [
                { id: 1, type: 'pdf', title: "Somers - Computer Assisted Translation", url: "#", icon: "üìò" },
                { id: 2, type: 'video', title: "Matecat Tutorial Series", url: "#", icon: "üé•" },
                { id: 3, type: 'tool', title: "Online TM Alignment Tool", url: "#", icon: "‚öôÔ∏è" },
                { id: 4, type: 'article', title: "Latest CAT Trends 2024", url: "#", icon: "üì∞" },
                { id: 5, type: 'glossary', title: "CAT Terminology Database", url: "#", icon: "üìñ" }
            ]
        };

        // Main App Component with enhanced navigation
        function App() {
            const [currentView, setCurrentView] = useState('dashboard');
            const [selectedTopic, setSelectedTopic] = useState(null);
            const [userProgress, setUserProgress] = useState({
                completedTopics: [],
                totalXP: 0,
                level: 1,
                streak: 7,
                badges: ["First Steps", "Quick Learner"],
                quizScores: {},
                flashcardProgress: {},
                mindmapsCompleted: [],
                exercisesCompleted: [],
                studyTime: 0,
                lastActive: new Date()
            });
            
            const [darkMode, setDarkMode] = useState(true);
            const [notifications, setNotifications] = useState([
                { id: 1, text: "New quiz available: CAT Fundamentals", time: "2 hours ago", read: false },
                { id: 2, text: "You earned the 'Flashcard Master' badge", time: "1 day ago", read: true }
            ]);

            useEffect(() => {
                // Initialize progress tracking
                const initialProgress = {};
                courseData.flashcards.forEach(card => {
                    initialProgress[card.id] = {
                        mastery: 'new',
                        nextReview: new Date(),
                        reviewCount: 0,
                        lastReviewed: null
                    };
                });
                
                setUserProgress(prev => ({
                    ...prev,
                    flashcardProgress: initialProgress
                }));
                
                // Check daily streak
                const today = new Date().toDateString();
                const lastActive = localStorage.getItem('lastActive');
                if (lastActive !== today) {
                    // Increment streak if consecutive
                    const lastActiveDate = new Date(lastActive);
                    const yesterday = new Date();
                    yesterday.setDate(yesterday.getDate() - 1);
                    
                    if (lastActiveDate.toDateString() === yesterday.toDateString()) {
                        setUserProgress(prev => ({ ...prev, streak: prev.streak + 1 }));
                    }
                    
                    localStorage.setItem('lastActive', today);
                }
                
                // Load study time
                const savedTime = localStorage.getItem('studyTime');
                if (savedTime) {
                    setUserProgress(prev => ({ ...prev, studyTime: parseInt(savedTime) }));
                }
            }, []);

            const addXP = (amount, activity) => {
                setUserProgress(prev => {
                    const newXP = prev.totalXP + amount;
                    const newLevel = Math.floor(newXP / 250) + 1;
                    
                    // Check for level up
                    if (newLevel > prev.level) {
                        setNotifications(prevNotifs => [
                            ...prevNotifs,
                            {
                                id: Date.now(),
                                text: `üéâ Level Up! You reached level ${newLevel}`,
                                time: "Just now",
                                read: false
                            }
                        ]);
                    }
                    
                    return { ...prev, totalXP: newXP, level: newLevel };
                });
            };

            const completeActivity = (type, id) => {
                setUserProgress(prev => {
                    const updated = { ...prev };
                    
                    switch(type) {
                        case 'topic':
                            if (!updated.completedTopics.includes(id)) {
                                updated.completedTopics.push(id);
                            }
                            break;
                        case 'mindmap':
                            if (!updated.mindmapsCompleted.includes(id)) {
                                updated.mindmapsCompleted.push(id);
                            }
                            break;
                        case 'exercise':
                            if (!updated.exercisesCompleted.includes(id)) {
                                updated.exercisesCompleted.push(id);
                            }
                            break;
                    }
                    
                    return updated;
                });
            };

            return (
                <div className={`min-h-screen ${darkMode ? 'dark' : ''}`}>
                    <Navigation 
                        currentView={currentView} 
                        setCurrentView={setCurrentView} 
                        userProgress={userProgress}
                        notifications={notifications}
                        darkMode={darkMode}
                        setDarkMode={setDarkMode}
                    />
                    
                    <main className="container mx-auto px-4 py-6 max-w-7xl mt-4">
                        {currentView === 'dashboard' && (
                            <EnhancedDashboard 
                                userProgress={userProgress} 
                                courseData={courseData}
                                setCurrentView={setCurrentView}
                                setSelectedTopic={setSelectedTopic}
                                notifications={notifications}
                            />
                        )}
                        {currentView === 'flashcards' && (
                            <EnhancedFlashcardView 
                                courseData={courseData}
                                selectedTopic={selectedTopic}
                                userProgress={userProgress}
                                setUserProgress={setUserProgress}
                                addXP={addXP}
                            />
                        )}
                        {currentView === 'quiz' && (
                            <EnhancedQuizView 
                                courseData={courseData}
                                selectedTopic={selectedTopic}
                                addXP={addXP}
                                userProgress={userProgress}
                                setUserProgress={setUserProgress}
                            />
                        )}
                        {currentView === 'mindmaps' && (
                            <MindmapView 
                                courseData={courseData}
                                selectedTopic={selectedTopic}
                                completeActivity={completeActivity}
                            />
                        )}
                        {currentView === 'matecat' && (
                            <MatecatSimulation 
                                exercises={courseData.practicalExercises}
                                completeActivity={completeActivity}
                            />
                        )}
                        {currentView === 'progress' && (
                            <EnhancedProgressView 
                                userProgress={userProgress} 
                                courseData={courseData} 
                            />
                        )}
                        {currentView === 'resources' && (
                            <ResourcesView resources={courseData.resources} />
                        )}
                        {currentView === 'casestudies' && (
                            <CaseStudyView caseStudies={courseData.caseStudies} />
                        )}
                    </main>
                    
                    <StudyTimer 
                        onTimeUpdate={(time) => {
                            setUserProgress(prev => ({ ...prev, studyTime: prev.studyTime + time }));
                            localStorage.setItem('studyTime', userProgress.studyTime + time);
                        }}
                    />
                </div>
            );
        }

        // Enhanced Navigation with dropdowns and notifications
        function Navigation({ currentView, setCurrentView, userProgress, notifications, darkMode, setDarkMode }) {
            const [showNotifications, setShowNotifications] = useState(false);
            const [showUserMenu, setShowUserMenu] = useState(false);

            return (
                <nav className="glass-card sticky top-0 z-50 mx-4 mt-4 border border-gray-800 rounded-2xl">
                    <div className="container mx-auto px-6">
                        <div className="flex items-center justify-between h-20">
                            {/* Logo and Brand */}
                            <div className="flex items-center gap-4">
                                <div className="relative">
                                    <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-[#6EC1E4] to-[#B57EDC] flex items-center justify-center">
                                        <span className="text-2xl font-bold">CAT</span>
                                    </div>
                                    <div className="absolute -top-1 -right-1 w-5 h-5 bg-[#7FFFD4] rounded-full border-2 border-[#0f172a]"></div>
                                </div>
                                <div>
                                    <h1 className="text-xl font-bold gradient-text">CAT Mastery Platform</h1>
                                    <p className="text-xs text-gray-400">Computer Assisted Translation Learning</p>
                                </div>
                            </div>

                            {/* Main Navigation */}
                            <div className="hidden md:flex items-center gap-1">
                                {[
                                    { id: 'dashboard', label: 'Dashboard', icon: 'üè†' },
                                    { id: 'flashcards', label: 'Flashcards', icon: 'üé¥' },
                                    { id: 'quiz', label: 'Quizzes', icon: 'üéØ' },
                                    { id: 'mindmaps', label: 'Mindmaps', icon: 'üó∫Ô∏è' },
                                    { id: 'matecat', label: 'Matecat', icon: '‚öôÔ∏è' },
                                    { id: 'casestudies', label: 'Case Studies', icon: 'üìã' },
                                    { id: 'resources', label: 'Resources', icon: 'üìö' },
                                    { id: 'progress', label: 'Progress', icon: 'üìä' }
                                ].map(item => (
                                    <button
                                        key={item.id}
                                        onClick={() => setCurrentView(item.id)}
                                        className={`flex items-center gap-2 px-4 py-3 rounded-xl text-sm font-medium transition-all ${
                                            currentView === item.id
                                                ? 'bg-gradient-to-r from-[#6EC1E4]/20 to-[#B57EDC]/20 text-white border border-[#6EC1E4]/30'
                                                : 'text-gray-400 hover:text-white hover:bg-gray-800/50'
                                        }`}
                                    >
                                        <span>{item.icon}</span>
                                        {item.label}
                                    </button>
                                ))}
                            </div>

                            {/* Right Side Controls */}
                            <div className="flex items-center gap-3">
                                {/* Theme Toggle */}
                                <button
                                    onClick={() => setDarkMode(!darkMode)}
                                    className="p-3 rounded-xl bg-gray-800 hover:bg-gray-700"
                                >
                                    {darkMode ? 'üåô' : '‚òÄÔ∏è'}
                                </button>
                                
                                {/* Notifications */}
                                <div className="relative">
                                    <button
                                        onClick={() => setShowNotifications(!showNotifications)}
                                        className="p-3 rounded-xl bg-gray-800 hover:bg-gray-700 relative"
                                    >
                                        <span>üîî</span>
                                        {notifications.filter(n => !n.read).length > 0 && (
                                            <span className="absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full text-xs flex items-center justify-center">
                                                {notifications.filter(n => !n.read).length}
                                            </span>
                                        )}
                                    </button>
                                    
                                    {showNotifications && (
                                        <div className="absolute right-0 mt-2 w-80 glass-card border border-gray-700 rounded-xl p-4 z-50">
                                            <div className="flex justify-between items-center mb-3">
                                                <h3 className="font-bold">Notifications</h3>
                                                <button className="text-xs text-[#6EC1E4]">Mark all read</button>
                                            </div>
                                            <div className="space-y-3 max-h-60 overflow-y-auto">
                                                {notifications.map(notif => (
                                                    <div key={notif.id} className={`p-3 rounded-lg ${notif.read ? 'bg-gray-800/50' : 'bg-[#6EC1E4]/10'}`}>
                                                        <p className="text-sm">{notif.text}</p>
                                                        <p className="text-xs text-gray-500 mt-1">{notif.time}</p>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    )}
                                </div>
                                
                                {/* User Profile */}
                                <div className="relative">
                                    <button
                                        onClick={() => setShowUserMenu(!showUserMenu)}
                                        className="flex items-center gap-3 p-2 rounded-xl bg-gradient-to-r from-gray-800 to-gray-900 hover:from-gray-700 hover:to-gray-800"
                                    >
                                        <div className="relative">
                                            <div className="w-10 h-10 rounded-full bg-gradient-to-br from-[#6EC1E4] to-[#B57EDC] flex items-center justify-center">
                                                <span className="font-bold">S</span>
                                            </div>
                                            <div className="absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-[#0f172a]"></div>
                                        </div>
                                        <div className="text-left hidden lg:block">
                                            <p className="text-sm font-semibold">Student</p>
                                            <p className="text-xs text-gray-400">Level {userProgress.level}</p>
                                        </div>
                                    </button>
                                    
                                    {showUserMenu && (
                                        <div className="absolute right-0 mt-2 w-48 glass-card border border-gray-700 rounded-xl p-2 z-50">
                                            <div className="p-3 border-b border-gray-700">
                                                <p className="font-semibold">Student Account</p>
                                                <p className="text-sm text-gray-400">{userProgress.totalXP} XP</p>
                                            </div>
                                            <button className="w-full text-left p-3 hover:bg-gray-800/50 rounded-lg">
                                                üìä My Progress
                                            </button>
                                            <button className="w-full text-left p-3 hover:bg-gray-800/50 rounded-lg">
                                                ‚öôÔ∏è Settings
                                            </button>
                                            <button className="w-full text-left p-3 hover:bg-gray-800/50 rounded-lg">
                                                üèÜ Achievements
                                            </button>
                                            <button className="w-full text-left p-3 hover:bg-gray-800/50 rounded-lg text-red-400">
                                                üö™ Logout
                                            </button>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                </nav>
            );
        }

        // Enhanced Dashboard with more features
        function EnhancedDashboard({ userProgress, courseData, setCurrentView, setSelectedTopic, notifications }) {
            const [dailyGoal, setDailyGoal] = useState(60); // minutes
            const [goalProgress, setGoalProgress] = useState(35);
            
            const upcomingActivities = [
                { type: 'quiz', title: 'TM Systems Quiz', topic: 'Translation Memory', time: 'Today' },
                { type: 'exercise', title: 'Matecat Practice', topic: 'Practical Tools', time: 'Tomorrow' },
                { type: 'flashcards', title: 'CAT Terminology', topic: 'Introduction', time: 'This Week' }
            ];

            return (
                <div className="space-y-8">
                    {/* Welcome Header */}
                    <div className="text-center mb-8">
                        <h1 className="text-5xl font-bold gradient-text mb-4">Welcome Back, Translator!</h1>
                        <p className="text-xl text-gray-400">Ready to master Computer Assisted Translation tools and techniques?</p>
                        <div className="flex justify-center gap-4 mt-6">
                            <div className="badge badge-gold">
                                <span>üî•</span>
                                <span>{userProgress.streak} Day Streak</span>
                            </div>
                            <div className="badge badge-silver">
                                <span>üèÜ</span>
                                <span>Level {userProgress.level}</span>
                            </div>
                            <div className="badge badge-bronze">
                                <span>‚è±Ô∏è</span>
                                <span>{Math.floor(userProgress.studyTime / 60)}h Studied</span>
                            </div>
                        </div>
                    </div>

                    {/* Quick Stats */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div className="glass-card p-6 hover:scale-105 transition-transform">
                            <div className="flex items-center justify-between mb-4">
                                <div className="p-3 rounded-xl bg-[#6EC1E4]/20">
                                    <span className="text-2xl">üé¥</span>
                                </div>
                                <span className="text-sm text-gray-400">50 cards</span>
                            </div>
                            <h3 className="text-2xl font-bold neon-blue">{courseData.flashcards.length}</h3>
                            <p className="text-gray-400">Flashcards</p>
                        </div>
                        
                        <div className="glass-card p-6 hover:scale-105 transition-transform">
                            <div className="flex items-center justify-between mb-4">
                                <div className="p-3 rounded-xl bg-[#B57EDC]/20">
                                    <span className="text-2xl">üéØ</span>
                                </div>
                                <span className="text-sm text-gray-400">25 quizzes</span>
                            </div>
                            <h3 className="text-2xl font-bold neon-purple">{courseData.quizzes.length}</h3>
                            <p className="text-gray-400">Quiz Questions</p>
                        </div>
                        
                        <div className="glass-card p-6 hover:scale-105 transition-transform">
                            <div className="flex items-center justify-between mb-4">
                                <div className="p-3 rounded-xl bg-[#7FFFD4]/20">
                                    <span className="text-2xl">üó∫Ô∏è</span>
                                </div>
                                <span className="text-sm text-gray-400">30 maps</span>
                            </div>
                            <h3 className="text-2xl font-bold neon-green">30</h3>
                            <p className="text-gray-400">Mindmaps</p>
                        </div>
                        
                        <div className="glass-card p-6 hover:scale-105 transition-transform">
                            <div className="flex items-center justify-between mb-4">
                                <div className="p-3 rounded-xl bg-[#FFB6C1]/20">
                                    <span className="text-2xl">‚öôÔ∏è</span>
                                </div>
                                <span className="text-sm text-gray-400">10 exercises</span>
                            </div>
                            <h3 className="text-2xl font-bold neon-pink">10</h3>
                            <p className="text-gray-400">Practical Exercises</p>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        {/* Course Progress */}
                        <div className="lg:col-span-2">
                            <div className="glass-card p-6">
                                <div className="flex justify-between items-center mb-6">
                                    <h2 className="text-2xl font-bold">Course Progress</h2>
                                    <span className="text-sm neon-blue">
                                        {((userProgress.completedTopics.length / courseData.topics.length) * 100).toFixed(0)}% Complete
                                    </span>
                                </div>
                                
                                <div className="space-y-4">
                                    {courseData.topics.map((topic, index) => {
                                        const progress = userProgress.completedTopics.includes(topic.id) ? 100 : Math.random() * 70;
                                        return (
                                            <div key={topic.id} className="space-y-2">
                                                <div className="flex justify-between">
                                                    <div className="flex items-center gap-3">
                                                        <span className="text-lg">{topic.icon}</span>
                                                        <span className="font-medium">{topic.name}</span>
                                                    </div>
                                                    <span className="text-sm text-gray-400">{progress.toFixed(0)}%</span>
                                                </div>
                                                <div className="w-full bg-gray-800 rounded-full h-2">
                                                    <div
                                                        className="h-2 rounded-full transition-all duration-500"
                                                        style={{ width: `${progress}%`, background: topic.color }}
                                                    ></div>
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>
                                
                                <button
                                    onClick={() => setCurrentView('progress')}
                                    className="w-full mt-6 py-3 rounded-xl bg-gradient-to-r from-[#6EC1E4] to-[#B57EDC] text-white font-semibold hover:opacity-90"
                                >
                                    View Detailed Progress
                                </button>
                            </div>
                        </div>

                        {/* Right Sidebar */}
                        <div className="space-y-6">
                            {/* Daily Goal */}
                            <div className="glass-card p-6">
                                <h3 className="text-xl font-bold mb-4">Daily Study Goal</h3>
                                <div className="space-y-4">
                                    <div className="flex justify-between">
                                        <span className="text-sm text-gray-400">Progress</span>
                                        <span className="text-sm font-semibold">{goalProgress}/{dailyGoal} min</span>
                                    </div>
                                    <div className="w-full bg-gray-800 rounded-full h-3">
                                        <div
                                            className="h-3 rounded-full bg-gradient-to-r from-[#6EC1E4] to-[#B57EDC]"
                                            style={{ width: `${(goalProgress / dailyGoal) * 100}%` }}
                                        ></div>
                                    </div>
                                    <button className="w-full py-2 rounded-lg border border-[#6EC1E4] text-[#6EC1E4] hover:bg-[#6EC1E4] hover:text-white">
                                        + Add Study Time
                                    </button>
                                </div>
                            </div>

                            {/* Quick Actions */}
                            <div className="glass-card p-6">
                                <h3 className="text-xl font-bold mb-4">Quick Actions</h3>
                                <div className="grid grid-cols-2 gap-3">
                                    <button
                                        onClick={() => setCurrentView('flashcards')}
                                        className="p-4 rounded-xl bg-[#6EC1E4]/10 border border-[#6EC1E4]/30 hover:bg-[#6EC1E4]/20 flex flex-col items-center"
                                    >
                                        <span className="text-2xl mb-2">üé¥</span>
                                        <span className="text-sm">Flashcards</span>
                                    </button>
                                    <button
                                        onClick={() => setCurrentView('quiz')}
                                        className="p-4 rounded-xl bg-[#B57EDC]/10 border border-[#B57EDC]/30 hover:bg-[#B57EDC]/20 flex flex-col items-center"
                                    >
                                        <span className="text-2xl mb-2">üéØ</span>
                                        <span className="text-sm">Quiz</span>
                                    </button>
                                    <button
                                        onClick={() => setCurrentView('mindmaps')}
                                        className="p-4 rounded-xl bg-[#7FFFD4]/10 border border-[#7FFFD4]/30 hover:bg-[#7FFFD4]/20 flex flex-col items-center"
                                    >
                                        <span className="text-2xl mb-2">üó∫Ô∏è</span>
                                        <span className="text-sm">Mindmaps</span>
                                    </button>
                                    <button
                                        onClick={() => setCurrentView('matecat')}
                                        className="p-4 rounded-xl bg-[#FFB6C1]/10 border border-[#FFB6C1]/30 hover:bg-[#FFB6C1]/20 flex flex-col items-center"
                                    >
                                        <span className="text-2xl mb-2">‚öôÔ∏è</span>
                                        <span className="text-sm">Matecat</span>
                                    </button>
                                </div>
                            </div>

                            {/* Upcoming Activities */}
                            <div className="glass-card p-6">
                                <h3 className="text-xl font-bold mb-4">Upcoming Activities</h3>
                                <div className="space-y-3">
                                    {upcomingActivities.map((activity, index) => (
                                        <div key={index} className="p-3 rounded-lg bg-gray-800/50">
                                            <div className="flex justify-between items-start">
                                                <div>
                                                    <p className="font-medium">{activity.title}</p>
                                                    <p className="text-sm text-gray-400">{activity.topic}</p>
                                                </div>
                                                <span className="text-xs bg-gray-700 px-2 py-1 rounded">{activity.time}</span>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // Study Timer Component
        function StudyTimer({ onTimeUpdate }) {
            const [isActive, setIsActive] = useState(false);
            const [time, setTime] = useState(0);
            const intervalRef = useRef(null);

            useEffect(() => {
                if (isActive) {
                    intervalRef.current = setInterval(() => {
                        setTime(prev => {
                            const newTime = prev + 1;
                            // Update every minute
                            if (newTime % 60 === 0) {
                                onTimeUpdate(1);
                            }
                            return newTime;
                        });
                    }, 1000);
                } else {
                    clearInterval(intervalRef.current);
                }
                
                return () => clearInterval(intervalRef.current);
            }, [isActive, onTimeUpdate]);

            const formatTime = (seconds) => {
                const mins = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            };

            return (
                <div className="fixed bottom-24 left-6 glass-card p-4 rounded-2xl border border-[#6EC1E4]/30 z-40">
                    <div className="text-center mb-3">
                        <div className="text-2xl font-bold neon-green">{formatTime(time)}</div>
                        <div className="text-xs text-gray-400">Study Timer</div>
                    </div>
                    <div className="flex gap-2">
                        <button
                            onClick={() => setIsActive(!isActive)}
                            className={`flex-1 py-2 rounded-lg font-medium ${
                                isActive 
                                    ? 'bg-red-500/20 text-red-400 border border-red-500/30' 
                                    : 'bg-[#6EC1E4] text-white'
                            }`}
                        >
                            {isActive ? 'Pause' : 'Start'}
                        </button>
                        <button
                            onClick={() => setTime(0)}
                            className="px-4 py-2 rounded-lg bg-gray-800 text-gray-400 border border-gray-700"
                        >
                            Reset
                        </button>
                    </div>
                </div>
            );
        }

        // Mindmap View Component
        function MindmapView({ courseData, selectedTopic, completeActivity }) {
            const [selectedMindmap, setSelectedMindmap] = useState(0);
            
            return (
                <div className="max-w-7xl mx-auto">
                    <div className="mb-8">
                        <h2 className="text-3xl font-bold gradient-text mb-4">Interactive Mindmaps</h2>
                        <p className="text-gray-400">Visualize connections between CAT concepts and tools</p>
                    </div>
                    
                    <div className="grid grid-cols-1 lg:grid-cols-4 gap-6">
                        {/* Mindmap List */}
                        <div className="lg:col-span-1">
                            <div className="glass-card p-6">
                                <h3 className="text-xl font-bold mb-4">Available Mindmaps</h3>
                                <div className="space-y-3 max-h-[500px] overflow-y-auto">
                                    {courseData.mindmaps.map((mindmap, index) => (
                                        <button
                                            key={mindmap.id}
                                            onClick={() => setSelectedMindmap(index)}
                                            className={`w-full text-left p-4 rounded-xl transition-all ${
                                                selectedMindmap === index
                                                    ? 'bg-gradient-to-r from-[#6EC1E4]/20 to-[#B57EDC]/20 border border-[#6EC1E4]/30'
                                                    : 'bg-gray-800/50 hover:bg-gray-800'
                                            }`}
                                        >
                                            <div className="flex items-center gap-3">
                                                <div className="p-2 rounded-lg bg-gray-700">
                                                    <span className="text-lg">üó∫Ô∏è</span>
                                                </div>
                                                <div>
                                                    <p className="font-medium">{mindmap.title}</p>
                                                    <p className="text-sm text-gray-400">
                                                        Topic {mindmap.topic} ‚Ä¢ {mindmap.nodes.length} nodes
                                                    </p>
                                                </div>
                                            </div>
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>
                        
                        {/* Mindmap Display */}
                        <div className="lg:col-span-3">
                            <div className="glass-card p-6 h-[600px]">
                                <div className="flex justify-between items-center mb-6">
                                    <h3 className="text-2xl font-bold">
                                        {courseData.mindmaps[selectedMindmap]?.title}
                                    </h3>
                                    <button className="px-4 py-2 rounded-lg bg-[#6EC1E4] text-white hover:bg-[#5eb1d4]">
                                        Export as Image
                                    </button>
                                </div>
                                
                                {/* Simple Mindmap Visualization (simplified without React Flow) */}
                                <div className="relative w-full h-[450px] bg-gray-900/50 rounded-xl border border-gray-800 overflow-hidden">
                                    <div className="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
                                        <div className="w-40 h-40 rounded-full bg-gradient-to-br from-[#6EC1E4]/30 to-[#B57EDC]/30 border-2 border-[#6EC1E4] flex items-center justify-center">
                                            <span className="text-lg font-bold">CAT Tools</span>
                                        </div>
                                    </div>
                                    
                                    {/* Connections */}
                                    <div className="absolute top-1/4 left-1/4">
                                        <div className="w-32 h-32 rounded-xl bg-gradient-to-br from-[#7FFFD4]/20 to-transparent border border-[#7FFFD4] flex items-center justify-center">
                                            <span className="text-center p-2">Translation<br/>Memory</span>
                                        </div>
                                    </div>
                                    
                                    <div className="absolute top-1/4 right-1/4">
                                        <div className="w-32 h-32 rounded-xl bg-gradient-to-br from-[#FFB6C1]/20 to-transparent border border-[#FFB6C1] flex items-center justify-center">
                                            <span className="text-center p-2">Terminology<br/>Management</span>
                                        </div>
                                    </div>
                                    
                                    <div className="absolute bottom-1/4 left-1/4">
                                        <div className="w-32 h-32 rounded-xl bg-gradient-to-br from-[#B57EDC]/20 to-transparent border border-[#B57EDC] flex items-center justify-center">
                                            <span className="text-center p-2">Quality<br/>Assurance</span>
                                        </div>
                                    </div>
                                    
                                    <div className="absolute bottom-1/4 right-1/4">
                                        <div className="w-32 h-32 rounded-xl bg-gradient-to-br from-[#6EC1E4]/20 to-transparent border border-[#6EC1E4] flex items-center justify-center">
                                            <span className="text-center p-2">Project<br/>Management</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div className="mt-6">
                                    <button
                                        onClick={() => completeActivity('mindmap', courseData.mindmaps[selectedMindmap].id)}
                                        className="px-6 py-3 rounded-lg bg-gradient-to-r from-[#6EC1E4] to-[#B57EDC] text-white font-semibold hover:opacity-90"
                                    >
                                        Mark as Completed +10 XP
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // Matecat Simulation Component
       // Replace the existing MatecatSimulation component with this complete version:

// Matecat Simulation Component with Realistic Interface
// Enhanced Flashcard View with Spaced Repetition System
function EnhancedFlashcardView({ courseData, selectedTopic, userProgress, setUserProgress, addXP }) {
    const [currentCardIndex, setCurrentCardIndex] = useState(0);
    const [isFlipped, setIsFlipped] = useState(false);
    const [filterTopic, setFilterTopic] = useState(selectedTopic || 'all');
    const [studyMode, setStudyMode] = useState('all'); // 'all', 'new', 'review', 'mastered'
    const [sessionStats, setSessionStats] = useState({
        studied: 0,
        mastered: 0,
        xpEarned: 0
    });
    
    // Filter cards based on topic and study mode
    const filteredCards = courseData.flashcards.filter(card => {
        const topicMatch = filterTopic === 'all' || card.topic === filterTopic;
        const progress = userProgress.flashcardProgress[card.id] || { mastery: 'new' };
        
        if (studyMode === 'all') return topicMatch;
        if (studyMode === 'new') return topicMatch && progress.mastery === 'new';
        if (studyMode === 'review') {
            const needsReview = progress.nextReview && new Date(progress.nextReview) <= new Date();
            return topicMatch && (progress.mastery === 'learning' || needsReview);
        }
        if (studyMode === 'mastered') return topicMatch && progress.mastery === 'mastered';
        return topicMatch;
    });
    
    const currentCard = filteredCards[currentCardIndex];
    const cardProgress = currentCard ? userProgress.flashcardProgress[currentCard.id] : null;

    const handleFlip = () => {
        setIsFlipped(!isFlipped);
    };

    const handleNext = () => {
        setIsFlipped(false);
        setCurrentCardIndex((prev) => (prev + 1) % filteredCards.length);
    };

    const handlePrevious = () => {
        setIsFlipped(false);
        setCurrentCardIndex((prev) => (prev - 1 + filteredCards.length) % filteredCards.length);
    };

    const handleMastery = (level) => {
        if (!currentCard) return;
        
        const now = new Date();
        let nextReview = new Date();
        let xpEarned = 0;
        
        // Spaced repetition intervals
        switch(level) {
            case 'again':
                nextReview.setMinutes(now.getMinutes() + 10); // Review in 10 minutes
                xpEarned = 5;
                break;
            case 'hard':
                nextReview.setHours(now.getHours() + 6); // Review in 6 hours
                xpEarned = 10;
                break;
            case 'good':
                nextReview.setDate(now.getDate() + 1); // Review in 1 day
                xpEarned = 15;
                break;
            case 'easy':
                nextReview.setDate(now.getDate() + 7); // Review in 1 week
                xpEarned = 25;
                break;
        }
        
        addXP(xpEarned);
        
        setUserProgress(prev => ({
            ...prev,
            flashcardProgress: {
                ...prev.flashcardProgress,
                [currentCard.id]: {
                    mastery: level === 'easy' ? 'mastered' : level === 'again' ? 'new' : 'learning',
                    nextReview: nextReview,
                    reviewCount: (prev.flashcardProgress[currentCard.id]?.reviewCount || 0) + 1,
                    lastReviewed: now,
                    history: [...(prev.flashcardProgress[currentCard.id]?.history || []), {
                        date: now,
                        rating: level,
                        xp: xpEarned
                    }]
                }
            }
        }));
        
        setSessionStats(prev => ({
            studied: prev.studied + 1,
            mastered: level === 'easy' ? prev.mastered + 1 : prev.mastered,
            xpEarned: prev.xpEarned + xpEarned
        }));
        
        handleNext();
    };

    const getMasteryColor = (mastery) => {
        switch(mastery) {
            case 'mastered': return '#7FFFD4';
            case 'learning': return '#FFB6C1';
            case 'new': return '#6EC1E4';
            default: return '#B57EDC';
        }
    };

    if (!currentCard) {
        return (
            <div className="text-center py-20">
                <div className="text-6xl mb-6">üéâ</div>
                <h2 className="text-3xl font-bold neon-blue mb-6">No cards to study!</h2>
                <p className="text-xl mb-8">You've completed all cards in this category.</p>
                <button
                    onClick={() => setStudyMode('all')}
                    className="px-8 py-3 rounded-xl bg-gradient-to-r from-[#6EC1E4] to-[#B57EDC] text-white font-semibold"
                >
                    Study All Cards
                </button>
            </div>
        );
    }

    return (
        <div className="max-w-6xl mx-auto">
            <div className="mb-8">
                <h2 className="text-3xl font-bold gradient-text mb-6">Flashcard Study</h2>
                
                <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                    <div className="glass-card p-4">
                        <div className="flex items-center gap-4">
                            <label className="text-sm font-medium">Topic:</label>
                            <select
                                value={filterTopic}
                                onChange={(e) => {
                                    setFilterTopic(e.target.value === 'all' ? 'all' : parseInt(e.target.value));
                                    setCurrentCardIndex(0);
                                    setIsFlipped(false);
                                }}
                                className="flex-1 px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 text-white text-sm"
                            >
                                <option value="all">All Topics</option>
                                {courseData.topics.map(topic => (
                                    <option key={topic.id} value={topic.id}>{topic.name}</option>
                                ))}
                            </select>
                        </div>
                    </div>
                    
                    <div className="glass-card p-4">
                        <div className="flex items-center gap-4">
                            <label className="text-sm font-medium">Study Mode:</label>
                            <select
                                value={studyMode}
                                onChange={(e) => {
                                    setStudyMode(e.target.value);
                                    setCurrentCardIndex(0);
                                    setIsFlipped(false);
                                }}
                                className="flex-1 px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 text-white text-sm"
                            >
                                <option value="all">All Cards</option>
                                <option value="new">New Cards Only</option>
                                <option value="review">Review Needed</option>
                                <option value="mastered">Mastered Cards</option>
                            </select>
                        </div>
                    </div>
                    
                    <div className="glass-card p-4">
                        <div className="text-center">
                            <p className="text-sm text-gray-400">Session Stats</p>
                            <p className="text-lg font-bold">
                                {sessionStats.studied} studied ‚Ä¢ {sessionStats.xpEarned} XP
                            </p>
                        </div>
                    </div>
                    
                    <div className="glass-card p-4">
                        <div className="text-center">
                            <p className="text-sm text-gray-400">Progress</p>
                            <p className="text-lg font-bold">
                                {currentCardIndex + 1}/{filteredCards.length}
                            </p>
                        </div>
                    </div>
                </div>
                
                {/* Progress Bar */}
                <div className="w-full bg-gray-800 rounded-full h-2 mb-6">
                    <div
                        className="h-2 rounded-full bg-gradient-to-r from-[#6EC1E4] to-[#B57EDC] transition-all duration-500"
                        style={{ width: `${((currentCardIndex + 1) / filteredCards.length) * 100}%` }}
                    ></div>
                </div>
            </div>

            {/* Flashcard */}
            <div className="mb-8">
                <div className="flex justify-between items-center mb-4">
                    <div className="flex items-center gap-3">
                        <div className="px-3 py-1 rounded-full text-sm"
                             style={{ 
                                 backgroundColor: getMasteryColor(cardProgress?.mastery || 'new') + '20',
                                 color: getMasteryColor(cardProgress?.mastery || 'new')
                             }}>
                            {cardProgress?.mastery?.toUpperCase() || 'NEW'}
                        </div>
                        <span className="text-sm text-gray-400">
                            Reviewed: {cardProgress?.reviewCount || 0} times
                        </span>
                    </div>
                    <div className="text-sm text-gray-400">
                        Topic {currentCard.topic}
                    </div>
                </div>
                
                <div
                    className={`flashcard ${isFlipped ? 'flipped' : ''} mb-8 cursor-pointer`}
                    onClick={handleFlip}
                >
                    <div className="flashcard-inner">
                        <div className="flashcard-front glow-blue rounded-2xl">
                            <div className="p-8">
                                <div className="text-xs neon-blue mb-6 font-semibold tracking-wider">QUESTION</div>
                                <p className="text-2xl font-semibold leading-relaxed">{currentCard.front}</p>
                                <div className="mt-12">
                                    <p className="text-sm neon-purple animate-pulse">Click to flip card</p>
                                </div>
                            </div>
                        </div>
                        <div className="flashcard-back glow-purple rounded-2xl">
                            <div className="p-8">
                                <div className="text-xs neon-purple mb-6 font-semibold tracking-wider">ANSWER</div>
                                <p className="text-lg leading-relaxed">{currentCard.back}</p>
                                <div className="mt-12">
                                    <p className="text-sm neon-green animate-pulse">Click to flip back</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div className="flex justify-between items-center mb-8">
                    <button
                        onClick={handlePrevious}
                        className="px-6 py-3 rounded-xl bg-gray-800 hover:bg-gray-700 text-white flex items-center gap-2"
                    >
                        <span>‚Üê</span>
                        <span>Previous</span>
                    </button>
                    
                    <div className="text-center">
                        <p className="text-sm text-gray-400">Card Progress</p>
                        <p className="text-lg font-bold">
                            {Object.values(userProgress.flashcardProgress).filter(p => p.mastery === 'mastered').length}/
                            {courseData.flashcards.length} Mastered
                        </p>
                    </div>
                    
                    <button
                        onClick={handleNext}
                        className="px-6 py-3 rounded-xl bg-gray-800 hover:bg-gray-700 text-white flex items-center gap-2"
                    >
                        <span>Next</span>
                        <span>‚Üí</span>
                    </button>
                </div>
            </div>

            {/* Mastery Buttons */}
            {isFlipped && (
                <div className="glass-card p-6 rounded-2xl">
                    <h3 className="text-xl font-bold neon-green mb-6 text-center">How well did you know this?</h3>
                    <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <button
                            onClick={() => handleMastery('again')}
                            className="p-4 rounded-xl bg-red-500/20 border border-red-500/30 hover:bg-red-500/30 flex flex-col items-center"
                        >
                            <span className="text-2xl mb-2">üòï</span>
                            <span className="font-semibold">Again</span>
                            <span className="text-sm text-gray-400">+5 XP</span>
                            <span className="text-xs text-gray-500 mt-2">Review in 10 min</span>
                        </button>
                        
                        <button
                            onClick={() => handleMastery('hard')}
                            className="p-4 rounded-xl bg-orange-500/20 border border-orange-500/30 hover:bg-orange-500/30 flex flex-col items-center"
                        >
                            <span className="text-2xl mb-2">üòì</span>
                            <span className="font-semibold">Hard</span>
                            <span className="text-sm text-gray-400">+10 XP</span>
                            <span className="text-xs text-gray-500 mt-2">Review in 6 hours</span>
                        </button>
                        
                        <button
                            onClick={() => handleMastery('good')}
                            className="p-4 rounded-xl bg-blue-500/20 border border-blue-500/30 hover:bg-blue-500/30 flex flex-col items-center"
                        >
                            <span className="text-2xl mb-2">üòä</span>
                            <span className="font-semibold">Good</span>
                            <span className="text-sm text-gray-400">+15 XP</span>
                            <span className="text-xs text-gray-500 mt-2">Review in 1 day</span>
                        </button>
                        
                        <button
                            onClick={() => handleMastery('easy')}
                            className="p-4 rounded-xl bg-green-500/20 border border-green-500/30 hover:bg-green-500/30 flex flex-col items-center"
                        >
                            <span className="text-2xl mb-2">üòÑ</span>
                            <span className="font-semibold">Easy</span>
                            <span className="text-sm text-gray-400">+25 XP</span>
                            <span className="text-xs text-gray-500 mt-2">Review in 1 week</span>
                        </button>
                    </div>
                    
                    <div className="mt-6 p-4 rounded-lg bg-gray-800/50">
                        <div className="flex justify-between items-center">
                            <div>
                                <p className="font-medium">Spaced Repetition System</p>
                                <p className="text-sm text-gray-400">Rate your recall to optimize review schedule</p>
                            </div>
                            <div className="text-right">
                                <p className="text-sm">Session XP: <span className="font-bold neon-green">{sessionStats.xpEarned}</span></p>
                                <p className="text-xs text-gray-400">{sessionStats.mastered} mastered this session</p>
                            </div>
                        </div>
                    </div>
                </div>
            )}
            
            {/* Flashcard Statistics */}
            <div className="glass-card p-6 mt-8">
                <h3 className="text-xl font-bold mb-6">Flashcard Statistics</h3>
                <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div className="text-center">
                        <div className="text-4xl font-bold neon-blue mb-2">
                            {Object.values(userProgress.flashcardProgress).filter(p => p.mastery === 'new').length}
                        </div>
                        <p className="text-gray-400">New Cards</p>
                    </div>
                    <div className="text-center">
                        <div className="text-4xl font-bold neon-pink mb-2">
                            {Object.values(userProgress.flashcardProgress).filter(p => p.mastery === 'learning').length}
                        </div>
                        <p className="text-gray-400">Learning</p>
                    </div>
                    <div className="text-center">
                        <div className="text-4xl font-bold neon-green mb-2">
                            {Object.values(userProgress.flashcardProgress).filter(p => p.mastery === 'mastered').length}
                        </div>
                        <p className="text-gray-400">Mastered</p>
                    </div>
                </div>
            </div>
        </div>
    );
}

// Enhanced Quiz View with Multiple Question Types
function EnhancedQuizView({ courseData, selectedTopic, addXP, userProgress, setUserProgress }) {
    const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);
    const [selectedAnswer, setSelectedAnswer] = useState(null);
    const [showFeedback, setShowFeedback] = useState(false);
    const [score, setScore] = useState(0);
    const [quizComplete, setQuizComplete] = useState(false);
    const [timeLeft, setTimeLeft] = useState(60);
    const [filterTopic, setFilterTopic] = useState(selectedTopic || 'all');
    const [quizType, setQuizType] = useState('multiple-choice'); // 'multiple-choice', 'true-false', 'matching'
    const [quizHistory, setQuizHistory] = useState([]);
    
    const filteredQuizzes = filterTopic === 'all'
        ? courseData.quizzes
        : courseData.quizzes.filter(quiz => quiz.topic === filterTopic);

    const currentQuestion = filteredQuizzes[currentQuestionIndex];

    useEffect(() => {
        if (!showFeedback && !quizComplete && timeLeft > 0) {
            const timer = setTimeout(() => setTimeLeft(timeLeft - 1), 1000);
            return () => clearTimeout(timer);
        } else if (timeLeft === 0 && !showFeedback) {
            handleAnswer(null);
        }
    }, [timeLeft, showFeedback, quizComplete]);

    const handleAnswer = (answerIndex) => {
        setSelectedAnswer(answerIndex);
        setShowFeedback(true);
        
        const isCorrect = answerIndex === currentQuestion.correct;
        const timeBonus = Math.max(1, Math.floor(timeLeft / 10));
        const earnedXP = isCorrect ? (20 + timeBonus) : 5;
        
        if (isCorrect) {
            setScore(score + 1);
        }
        
        addXP(earnedXP);
        
        // Record quiz history
        setQuizHistory(prev => [...prev, {
            questionId: currentQuestion.id,
            correct: isCorrect,
            timeSpent: 60 - timeLeft,
            xpEarned: earnedXP,
            date: new Date()
        }]);
    };

    const handleNext = () => {
        if (currentQuestionIndex < filteredQuizzes.length - 1) {
            setCurrentQuestionIndex(currentQuestionIndex + 1);
            setSelectedAnswer(null);
            setShowFeedback(false);
            setTimeLeft(60);
        } else {
            setQuizComplete(true);
            const percentage = (score / filteredQuizzes.length) * 100;
            
            // Award badges based on performance
            if (percentage >= 90) {
                const badgeName = `Quiz Master: ${courseData.topics.find(t => t.id === filterTopic)?.name || 'All Topics'}`;
                if (!userProgress.badges.includes(badgeName)) {
                    setUserProgress(prev => ({
                        ...prev,
                        badges: [...prev.badges, badgeName]
                    }));
                }
                addXP(100); // Perfect score bonus
            } else if (percentage >= 80) {
                addXP(50); // Good score bonus
            }
        }
    };

    const resetQuiz = () => {
        setCurrentQuestionIndex(0);
        setSelectedAnswer(null);
        setShowFeedback(false);
        setScore(0);
        setQuizComplete(false);
        setTimeLeft(60);
        setQuizHistory([]);
    };

    if (quizComplete) {
        const percentage = (score / filteredQuizzes.length) * 100;
        const totalXP = quizHistory.reduce((sum, item) => sum + item.xpEarned, 0);
        
        return (
            <div className="max-w-4xl mx-auto">
                <div className="glass-card p-8 text-center mb-8">
                    <div className="text-7xl mb-6">
                        {percentage >= 90 ? 'üèÜ' : percentage >= 70 ? 'üéâ' : 'üìö'}
                    </div>
                    <h2 className="text-4xl font-bold gradient-text mb-6">Quiz Complete!</h2>
                    
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <div className="p-6 rounded-xl bg-gray-800/50">
                            <p className="text-2xl font-bold neon-green">{score}/{filteredQuizzes.length}</p>
                            <p className="text-gray-400">Score</p>
                        </div>
                        <div className="p-6 rounded-xl bg-gray-800/50">
                            <p className="text-2xl font-bold neon-blue">{percentage.toFixed(1)}%</p>
                            <p className="text-gray-400">Accuracy</p>
                        </div>
                        <div className="p-6 rounded-xl bg-gray-800/50">
                            <p className="text-2xl font-bold neon-purple">+{totalXP} XP</p>
                            <p className="text-gray-400">Total Earned</p>
                        </div>
                    </div>
                    
                    {percentage >= 90 && (
                        <div className="mb-8 p-6 rounded-xl bg-gradient-to-r from-yellow-900/30 to-yellow-800/30 border border-yellow-700">
                            <p className="text-xl neon-pink mb-4">üéñÔ∏è Quiz Master Badge Earned!</p>
                            <div className="badge badge-gold text-lg mx-auto">
                                Quiz Master: {courseData.topics.find(t => t.id === filterTopic)?.name || 'All Topics'}
                            </div>
                            <p className="text-sm text-gray-400 mt-4">+100 XP Bonus for perfect score!</p>
                        </div>
                    )}
                    
                    <div className="flex gap-4 justify-center">
                        <button
                            onClick={resetQuiz}
                            className="px-8 py-3 rounded-xl bg-gradient-to-r from-[#6EC1E4] to-[#B57EDC] text-white font-semibold hover:opacity-90"
                        >
                            Try Again
                        </button>
                        <button
                            onClick={() => {
                                setFilterTopic('all');
                                resetQuiz();
                            }}
                            className="px-8 py-3 rounded-xl border border-gray-600 text-gray-400 hover:text-white"
                        >
                            Try Different Topic
                        </button>
                    </div>
                </div>
                
                {/* Quiz History */}
                <div className="glass-card p-6">
                    <h3 className="text-xl font-bold mb-6">Quiz Breakdown</h3>
                    <div className="space-y-4">
                        {quizHistory.map((record, index) => (
                            <div key={index} className={`p-4 rounded-lg ${
                                record.correct ? 'bg-green-900/20' : 'bg-red-900/20'
                            }`}>
                                <div className="flex justify-between items-center">
                                    <div className="flex items-center gap-3">
                                        <span className={`text-lg ${record.correct ? 'text-green-400' : 'text-red-400'}`}>
                                            {record.correct ? '‚úì' : '‚úó'}
                                        </span>
                                        <span>Question {index + 1}</span>
                                    </div>
                                    <div className="text-right">
                                        <span className="text-sm text-gray-400">{record.timeSpent}s ‚Ä¢ </span>
                                        <span className="font-semibold neon-green">+{record.xpEarned} XP</span>
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            </div>
        );
    }

    if (!currentQuestion) {
        return (
            <div className="text-center py-20">
                <h2 className="text-3xl font-bold neon-blue mb-6">No quiz questions available</h2>
                <p className="text-xl">Select a different topic or quiz type</p>
            </div>
        );
    }

    return (
        <div className="max-w-4xl mx-auto">
            <div className="mb-8">
                <div className="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6">
                    <div>
                        <h2 className="text-3xl font-bold gradient-text">Quiz Challenge</h2>
                        <p className="text-gray-400">Test your CAT knowledge</p>
                    </div>
                    <div className="flex items-center gap-4">
                        <div className="text-right">
                            <p className="text-2xl font-bold neon-pink pulse">‚è±Ô∏è {timeLeft}s</p>
                            <p className="text-sm text-gray-400">Time remaining</p>
                        </div>
                    </div>
                </div>
                
                <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                    <div className="glass-card p-4">
                        <div className="flex items-center gap-4">
                            <label className="text-sm font-medium">Topic:</label>
                            <select
                                value={filterTopic}
                                onChange={(e) => {
                                    setFilterTopic(e.target.value === 'all' ? 'all' : parseInt(e.target.value));
                                    resetQuiz();
                                }}
                                className="flex-1 px-3 py-2 rounded-lg bg-gray-800 border border-gray-700 text-white text-sm"
                            >
                                <option value="all">All Topics</option>
                                {courseData.topics.map(topic => (
                                    <option key={topic.id} value={topic.id}>{topic.name}</option>
                                ))}
                            </select>
                        </div>
                    </div>
                    
                    <div className="glass-card p-4">
                        <div className="text-center">
                            <p className="text-sm text-gray-400">Question</p>
                            <p className="text-lg font-bold">
                                {currentQuestionIndex + 1}/{filteredQuizzes.length}
                            </p>
                        </div>
                    </div>
                    
                    <div className="glass-card p-4">
                        <div className="text-center">
                            <p className="text-sm text-gray-400">Current Score</p>
                            <p className="text-lg font-bold neon-green">
                                {score}/{currentQuestionIndex + (showFeedback ? 1 : 0)}
                            </p>
                        </div>
                    </div>
                </div>
                
                {/* Progress Bar */}
                <div className="w-full bg-gray-800 rounded-full h-2 mb-6">
                    <div
                        className="h-2 rounded-full bg-gradient-to-r from-[#6EC1E4] to-[#B57EDC] transition-all duration-500"
                        style={{ width: `${((currentQuestionIndex + 1) / filteredQuizzes.length) * 100}%` }}
                    ></div>
                </div>
            </div>

            {/* Question Card */}
            <div className="glass-card p-6 mb-8 glow-purple">
                <div className="flex justify-between items-start mb-6">
                    <div>
                        <span className="px-3 py-1 rounded-full text-sm bg-purple-900/30 text-purple-400">
                            Multiple Choice
                        </span>
                        <span className="text-sm text-gray-400 ml-4">
                            Topic {currentQuestion.topic}
                        </span>
                    </div>
                    <div className="text-right">
                        <p className="text-sm text-gray-400">Time Bonus</p>
                        <p className="font-bold neon-green">+{Math.max(1, Math.floor(timeLeft / 10))} XP</p>
                    </div>
                </div>
                
                <h3 className="text-2xl font-semibold mb-8 leading-relaxed">{currentQuestion.question}</h3>
                
                <div className="space-y-4">
                    {currentQuestion.options.map((option, index) => (
                        <button
                            key={index}
                            onClick={() => !showFeedback && handleAnswer(index)}
                            disabled={showFeedback}
                            className={`w-full p-4 rounded-xl text-left transition-all ${
                                showFeedback
                                    ? index === currentQuestion.correct
                                        ? 'bg-green-900/30 border-2 border-green-700'
                                        : index === selectedAnswer
                                        ? 'bg-red-900/30 border-2 border-red-700'
                                        : 'bg-gray-800/50 border border-gray-700'
                                    : 'bg-gray-800/50 border border-gray-700 hover:border-[#B57EDC] hover:bg-gray-800'
                            }`}
                        >
                            <div className="flex items-center justify-between">
                                <div className="flex items-center gap-4">
                                    <div className={`w-8 h-8 rounded-lg flex items-center justify-center ${
                                        showFeedback
                                            ? index === currentQuestion.correct
                                                ? 'bg-green-600'
                                                : index === selectedAnswer
                                                ? 'bg-red-600'
                                                : 'bg-gray-700'
                                            : 'bg-gray-700'
                                    }`}>
                                        <span className="font-bold">
                                            {String.fromCharCode(65 + index)}
                                        </span>
                                    </div>
                                    <span className="text-lg">{option}</span>
                                </div>
                                {showFeedback && index === currentQuestion.correct && (
                                    <span className="text-2xl text-green-400">‚úÖ</span>
                                )}
                                {showFeedback && index === selectedAnswer && index !== currentQuestion.correct && (
                                    <span className="text-2xl text-red-400">‚ùå</span>
                                )}
                            </div>
                        </button>
                    ))}
                </div>
            </div>

            {showFeedback && (
                <div className={`glass-card p-6 mb-8 ${
                    selectedAnswer === currentQuestion.correct ? 'glow-green' : 'glow-pink'
                }`}>
                    <div className="flex items-start gap-4 mb-6">
                        <div className={`text-4xl ${selectedAnswer === currentQuestion.correct ? 'neon-green' : 'neon-pink'}`}>
                            {selectedAnswer === currentQuestion.correct ? 'üéâ' : 'üìù'}
                        </div>
                        <div>
                            <h3 className={`text-2xl font-bold mb-2 ${
                                selectedAnswer === currentQuestion.correct ? 'neon-green' : 'neon-pink'
                            }`}>
                                {selectedAnswer === currentQuestion.correct ? 'Correct Answer!' : 'Not Quite Right'}
                            </h3>
                            <p className="text-gray-300">{currentQuestion.explanation}</p>
                        </div>
                    </div>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div className="p-4 rounded-xl bg-gray-800/50">
                            <p className="text-sm text-gray-400">Time Bonus</p>
                            <p className="text-xl font-bold neon-green">
                                +{Math.max(1, Math.floor(timeLeft / 10))} XP
                            </p>
                        </div>
                        <div className="p-4 rounded-xl bg-gray-800/50">
                            <p className="text-sm text-gray-400">Total XP Earned</p>
                            <p className="text-xl font-bold neon-blue">
                                +{selectedAnswer === currentQuestion.correct ? (20 + Math.max(1, Math.floor(timeLeft / 10))) : 5}
                            </p>
                        </div>
                    </div>
                    
                    <button
                        onClick={handleNext}
                        className="w-full py-3 rounded-xl bg-gradient-to-r from-[#6EC1E4] to-[#B57EDC] text-white font-semibold hover:opacity-90"
                    >
                        {currentQuestionIndex < filteredQuizzes.length - 1 ? 'Next Question ‚Üí' : 'See Results'}
                    </button>
                </div>
            )}

            {/* Quiz Stats */}
            <div className="glass-card p-6">
                <h3 className="text-xl font-bold mb-6">Quiz Statistics</h3>
                <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div className="text-center p-4 rounded-xl bg-gray-800/50">
                        <p className="text-2xl font-bold neon-green">{score}</p>
                        <p className="text-sm text-gray-400">Correct</p>
                    </div>
                    <div className="text-center p-4 rounded-xl bg-gray-800/50">
                        <p className="text-2xl font-bold neon-blue">
                            {currentQuestionIndex + (showFeedback ? 1 : 0) - score}
                        </p>
                        <p className="text-sm text-gray-400">Incorrect</p>
                    </div>
                    <div className="text-center p-4 rounded-xl bg-gray-800/50">
                        <p className="text-2xl font-bold neon-purple">
                            {currentQuestionIndex + (showFeedback ? 1 : 0) > 0
                                ? ((score / (currentQuestionIndex + (showFeedback ? 1 : 0))) * 100).toFixed(0)
                                : 0}%
                        </p>
                        <p className="text-sm text-gray-400">Accuracy</p>
                    </div>
                    <div className="text-center p-4 rounded-xl bg-gray-800/50">
                        <p className="text-2xl font-bold neon-pink">
                            {quizHistory.reduce((sum, item) => sum + item.xpEarned, 0)}
                        </p>
                        <p className="text-sm text-gray-400">XP Earned</p>
                    </div>
                </div>
            </div>
        </div>
    );
}

// Enhanced Progress View with Analytics
function EnhancedProgressView({ userProgress, courseData }) {
    const [timeRange, setTimeRange] = useState('week'); // 'day', 'week', 'month', 'all'
    const [activeTab, setActiveTab] = useState('overview'); // 'overview', 'topics', 'analytics', 'achievements'
    
    const completionPercentage = (userProgress.completedTopics.length / courseData.topics.length) * 100;
    const radius = 120;
    const circumference = 2 * Math.PI * radius;
    const strokeDashoffset = circumference - (completionPercentage / 100) * circumference;
    
    const masteredCards = Object.values(userProgress.flashcardProgress).filter(
        p => p.mastery === 'mastered'
    ).length;
    const learningCards = Object.values(userProgress.flashcardProgress).filter(
        p => p.mastery === 'learning'
    ).length;
    const newCards = courseData.flashcards.length - masteredCards - learningCards;
    
    // Mock analytics data
    const studyData = {
        week: [4, 6, 3, 7, 5, 8, 6], // hours per day
        month: [25, 28, 32, 30, 35, 38, 40, 42, 45, 38, 35, 40], // hours per week
        topics: courseData.topics.map(topic => ({
            name: topic.name,
            completion: userProgress.completedTopics.includes(topic.id) ? 100 : Math.floor(Math.random() * 70),
            timeSpent: Math.floor(Math.random() * 10) + 2, // hours
            score: Math.floor(Math.random() * 30) + 70 // percentage
        }))
    };

    return (
        <div className="max-w-7xl mx-auto">
            <div className="mb-8">
                <h2 className="text-3xl font-bold gradient-text mb-4">Learning Analytics</h2>
                <p className="text-gray-400">Track your progress and performance in CAT studies</p>
            </div>
            
            {/* Tabs */}
            <div className="flex gap-2 mb-8 overflow-x-auto scrollbar-hide">
                {['overview', 'topics', 'analytics', 'achievements'].map(tab => (
                    <button
                        key={tab}
                        onClick={() => setActiveTab(tab)}
                        className={`px-6 py-3 rounded-xl font-medium capitalize whitespace-nowrap ${
                            activeTab === tab
                                ? 'bg-gradient-to-r from-[#6EC1E4] to-[#B57EDC] text-white'
                                : 'bg-gray-800 text-gray-400 hover:text-white'
                        }`}
                    >
                        {tab}
                    </button>
                ))}
            </div>
            
            {/* Time Range Selector */}
            <div className="flex justify-end mb-6">
                <div className="flex gap-2 bg-gray-800 rounded-xl p-1">
                    {['day', 'week', 'month', 'all'].map(range => (
                        <button
                            key={range}
                            onClick={() => setTimeRange(range)}
                            className={`px-4 py-2 rounded-lg capitalize text-sm ${
                                timeRange === range
                                    ? 'bg-[#6EC1E4] text-white'
                                    : 'text-gray-400 hover:text-white'
                            }`}
                        >
                            {range}
                        </button>
                    ))}
                </div>
            </div>
            
            {activeTab === 'overview' && (
                <div className="space-y-8">
                    {/* Stats Overview */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div className="glass-card p-6">
                            <div className="flex items-center justify-between mb-4">
                                <div className="p-3 rounded-xl bg-[#6EC1E4]/20">
                                    <span className="text-2xl">üèÜ</span>
                                </div>
                                <span className="text-sm text-gray-400">Level</span>
                            </div>
                            <p className="text-3xl font-bold neon-blue">{userProgress.level}</p>
                            <p className="text-gray-400">Current Level</p>
                            <div className="mt-4">
                                <div className="flex justify-between text-sm mb-1">
                                    <span>Progress to Level {userProgress.level + 1}</span>
                                    <span>{userProgress.totalXP % 250}/250 XP</span>
                                </div>
                                <div className="w-full bg-gray-800 rounded-full h-2">
                                    <div
                                        className="h-2 rounded-full bg-gradient-to-r from-[#6EC1E4] to-[#B57EDC]"
                                        style={{ width: `${((userProgress.totalXP % 250) / 250) * 100}%` }}
                                    ></div>
                                </div>
                            </div>
                        </div>
                        
                        <div className="glass-card p-6">
                            <div className="flex items-center justify-between mb-4">
                                <div className="p-3 rounded-xl bg-[#B57EDC]/20">
                                    <span className="text-2xl">üî•</span>
                                </div>
                                <span className="text-sm text-gray-400">Streak</span>
                            </div>
                            <p className="text-3xl font-bold neon-purple">{userProgress.streak}</p>
                            <p className="text-gray-400">Day Streak</p>
                            <div className="mt-4">
                                <div className="flex items-center gap-2 text-sm">
                                    <span className="text-green-400">+10 XP daily bonus</span>
                                    <span className="text-xs bg-green-900/30 text-green-400 px-2 py-1 rounded">
                                        Active
                                    </span>
                                </div>
                            </div>
                        </div>
                        
                        <div className="glass-card p-6">
                            <div className="flex items-center justify-between mb-4">
                                <div className="p-3 rounded-xl bg-[#7FFFD4]/20">
                                    <span className="text-2xl">‚è±Ô∏è</span>
                                </div>
                                <span className="text-sm text-gray-400">Study Time</span>
                            </div>
                            <p className="text-3xl font-bold neon-green">
                                {Math.floor(userProgress.studyTime / 60)}h {userProgress.studyTime % 60}m
                            </p>
                            <p className="text-gray-400">Total Time</p>
                            <div className="mt-4">
                                <div className="text-sm">
                                    <span className="text-gray-400">Avg: </span>
                                    <span className="font-semibold">
                                        {Math.floor((userProgress.studyTime / Math.max(userProgress.streak, 1)) / 60)}h/day
                                    </span>
                                </div>
                            </div>
                        </div>
                        
                        <div className="glasscard p-6">
                            <div className="flex items-center justify-between mb-4">
                                <div className="p-3 rounded-xl bg-[#FFB6C1]/20">
                                    <span className="text-2xl">‚ú®</span>
                                </div>
                                <span className="text-sm text-gray-400">Total XP</span>
                            </div>
                            <p className="text-3xl font-bold neon-pink">{userProgress.totalXP}</p>
                            <p className="text-gray-400">Experience Points</p>
                            <div className="mt-4">
                                <div className="text-sm">
                                    <span className="text-gray-400">Rank: </span>
                                    <span className="font-semibold">
                                        {userProgress.totalXP < 1000 ? 'Novice' :
                                         userProgress.totalXP < 2500 ? 'Apprentice' :
                                         userProgress.totalXP < 5000 ? 'Scholar' : 'Master'}
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    {/* Course Progress */}
                    <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div className="glass-card p-6">
                            <h3 className="text-xl font-bold mb-6">Course Progress</h3>
                            <div className="flex items-center justify-center mb-6">
                                <svg className="progress-ring" width="280" height="280">
                                    <circle
                                        cx="140"
                                        cy="140"
                                        r={radius}
                                        fill="transparent"
                                        stroke="rgba(110, 193, 228, 0.2)"
                                        strokeWidth="20"
                                    />
                                    <circle
                                        className="progress-ring-circle"
                                        cx="140"
                                        cy="140"
                                        r={radius}
                                        fill="transparent"
                                        strokeWidth="20"
                                        strokeDasharray={circumference}
                                        strokeDashoffset={strokeDashoffset}
                                        stroke="url(#gradient)"
                                    />
                                    <defs>
                                        <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                            <stop offset="0%" stopColor="#6EC1E4" />
                                            <stop offset="100%" stopColor="#B57EDC" />
                                        </linearGradient>
                                    </defs>
                                    <text
                                        x="140"
                                        y="140"
                                        textAnchor="middle"
                                        dy="0.3em"
                                        fontSize="40"
                                        fontWeight="bold"
                                        fill="#6EC1E4"
                                    >
                                        {completionPercentage.toFixed(0)}%
                                    </text>
                                </svg>
                            </div>
                            <div className="text-center">
                                <p className="text-lg">
                                    {userProgress.completedTopics.length}/{courseData.topics.length} Topics Completed
                                </p>
                                <p className="text-sm text-gray-400 mt-2">
                                    {courseData.topics.length - userProgress.completedTopics.length} topics remaining
                                </p>
                            </div>
                        </div>
                        
                        <div className="glass-card p-6">
                            <h3 className="text-xl font-bold mb-6">Flashcard Mastery</h3>
                            <div className="space-y-6">
                                <div>
                                    <div className="flex justify-between mb-2">
                                        <span className="font-medium">Mastered Cards</span>
                                        <span className="neon-green font-bold">{masteredCards}</span>
                                    </div>
                                    <div className="w-full bg-gray-800 rounded-full h-3">
                                        <div
                                            className="h-3 rounded-full bg-[#7FFFD4]"
                                            style={{ width: `${(masteredCards / courseData.flashcards.length) * 100}%` }}
                                        ></div>
                                    </div>
                                </div>
                                
                                <div>
                                    <div className="flex justify-between mb-2">
                                        <span className="font-medium">Learning Cards</span>
                                        <span className="neon-pink font-bold">{learningCards}</span>
                                    </div>
                                    <div className="w-full bg-gray-800 rounded-full h-3">
                                        <div
                                            className="h-3 rounded-full bg-[#FFB6C1]"
                                            style={{ width: `${(learningCards / courseData.flashcards.length) * 100}%` }}
                                        ></div>
                                    </div>
                                </div>
                                
                                <div>
                                    <div className="flex justify-between mb-2">
                                        <span className="font-medium">New Cards</span>
                                        <span className="neon-blue font-bold">{newCards}</span>
                                    </div>
                                    <div className="w-full bg-gray-800 rounded-full h-3">
                                        <div
                                            className="h-3 rounded-full bg-[#6EC1E4]"
                                            style={{ width: `${(newCards / courseData.flashcards.length) * 100}%` }}
                                        ></div>
                                    </div>
                                </div>
                            </div>
                            
                            <div className="mt-8 p-4 rounded-xl bg-gray-800/50">
                                <div className="flex justify-between items-center">
                                    <div>
                                        <p className="font-medium">Study Recommendation</p>
                                        <p className="text-sm text-gray-400">
                                            {learningCards > 0 
                                                ? `Focus on ${learningCards} learning cards`
                                                : masteredCards === courseData.flashcards.length
                                                ? 'All cards mastered!'
                                                : `Start with ${newCards} new cards`
                                            }
                                        </p>
                                    </div>
                                    <button className="px-4 py-2 rounded-lg bg-[#6EC1E4] text-white text-sm">
                                        Study Now
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            )}
            
            {activeTab === 'topics' && (
                <div className="glass-card p-6">
                    <h3 className="text-xl font-bold mb-6">Topic Progress</h3>
                    <div className="space-y-4">
                        {studyData.topics.map((topic, index) => (
                            <div key={index} className="p-4 rounded-xl bg-gray-800/50 hover:bg-gray-800">
                                <div className="flex items-center justify-between mb-3">
                                    <div className="flex items-center gap-3">
                                        <div className="w-10 h-10 rounded-lg flex items-center justify-center bg-gray-700">
                                            <span className="text-lg">{courseData.topics[index]?.icon || 'üìö'}</span>
                                        </div>
                                        <div>
                                            <p className="font-medium">{topic.name}</p>
                                            <p className="text-sm text-gray-400">
                                                {topic.timeSpent}h studied ‚Ä¢ Score: {topic.score}%
                                            </p>
                                        </div>
                                    </div>
                                    <div className="text-right">
                                        <p className="text-lg font-bold neon-green">{topic.completion}%</p>
                                        <p className="text-sm text-gray-400">Complete</p>
                                    </div>
                                </div>
                                <div className="w-full bg-gray-700 rounded-full h-2">
                                    <div
                                        className="h-2 rounded-full transition-all duration-500"
                                        style={{ 
                                            width: `${topic.completion}%`,
                                            background: courseData.topics[index]?.color || '#6EC1E4'
                                        }}
                                    ></div>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            )}
            
            {activeTab === 'achievements' && (
                <div className="glass-card p-6">
                    <h3 className="text-xl font-bold mb-6">Achievements & Badges</h3>
                    
                    {userProgress.badges.length > 0 ? (
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8">
                            {userProgress.badges.map((badge, index) => (
                                <div key={index} className="p-4 rounded-xl bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700">
                                    <div className="flex items-center gap-3 mb-3">
                                        <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-yellow-600 to-orange-600 flex items-center justify-center">
                                            <span className="text-xl">üèÜ</span>
                                        </div>
                                        <div>
                                            <p className="font-bold">{badge}</p>
                                            <p className="text-xs text-gray-400">Earned</p>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    ) : (
                        <div className="text-center py-8">
                            <div className="text-6xl mb-4">üéØ</div>
                            <p className="text-xl font-bold mb-2">No badges yet</p>
                            <p className="text-gray-400">Complete quizzes and activities to earn badges!</p>
                        </div>
                    )}
                    
                    {/* Available Badges */}
                    <div className="mt-8">
                        <h4 className="font-bold mb-4">Available Badges</h4>
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                            {[
                                { name: 'First Steps', requirement: 'Complete 5 flashcards', icon: 'üöÄ', locked: false },
                                { name: 'Quiz Master', requirement: 'Score 90%+ on any quiz', icon: 'üéØ', locked: !userProgress.badges.includes('Quiz Master') },
                                { name: 'Flashcard Pro', requirement: 'Master 25 flashcards', icon: 'üé¥', locked: masteredCards < 25 },
                                { name: 'Study Streak', requirement: '7-day study streak', icon: 'üî•', locked: userProgress.streak < 7 },
                                { name: 'CAT Expert', requirement: 'Complete all topics', icon: 'üíª', locked: userProgress.completedTopics.length < courseData.topics.length },
                                { name: 'Matecat Pro', requirement: 'Complete 5 exercises', icon: '‚öôÔ∏è', locked: userProgress.exercisesCompleted?.length < 5 },
                                { name: 'Mindmap Master', requirement: 'Complete 10 mindmaps', icon: 'üó∫Ô∏è', locked: userProgress.mindmapsCompleted?.length < 10 },
                                { name: 'Translation Guru', requirement: 'Earn 1000 XP', icon: '‚ú®', locked: userProgress.totalXP < 1000 }
                            ].map((badge, index) => (
                                <div key={index} className={`p-4 rounded-xl ${
                                    badge.locked 
                                    ? 'bg-gray-900/50 border border-gray-700' 
                                    : 'bg-gradient-to-br from-purple-900/30 to-blue-900/30 border border-purple-700/30'
                                }`}>
                                    <div className="flex items-center gap-3 mb-3">
                                        <div className={`w-10 h-10 rounded-lg flex items-center justify-center ${
                                            badge.locked ? 'bg-gray-800' : 'bg-gradient-to-br from-purple-600 to-blue-600'
                                        }`}>
                                            <span className="text-lg">{badge.icon}</span>
                                        </div>
                                        <div>
                                            <p className="font-bold text-sm">{badge.name}</p>
                                            <p className="text-xs text-gray-400">{badge.requirement}</p>
                                        </div>
                                    </div>
                                    {badge.locked ? (
                                        <div className="text-xs text-gray-500">Locked</div>
                                    ) : (
                                        <div className="text-xs text-green-400">‚úì Unlocked</div>
                                    )}
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            )}
            
            {activeTab === 'analytics' && (
                <div className="space-y-8">
                    {/* Study Time Chart */}
                    <div className="glass-card p-6">
                        <h3 className="text-xl font-bold mb-6">Study Time Analysis</h3>
                        <div className="h-64 flex items-end gap-2">
                            {studyData[timeRange].map((value, index) => (
                                <div key={index} className="flex-1 flex flex-col items-center">
                                    <div
                                        className="w-full rounded-t-lg bg-gradient-to-t from-[#6EC1E4] to-[#B57EDC]"
                                        style={{ height: `${(value / Math.max(...studyData[timeRange])) * 80}%` }}
                                    ></div>
                                    <div className="text-xs text-gray-400 mt-2">
                                        {timeRange === 'week' ? ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'][index] :
                                         timeRange === 'month' ? `W${index + 1}` : `M${index + 1}`}
                                    </div>
                                </div>
                            ))}
                        </div>
                        <div className="mt-6 text-center">
                            <p className="text-sm text-gray-400">
                                {timeRange === 'week' ? 'Weekly Study Hours' :
                                 timeRange === 'month' ? 'Monthly Study Hours' :
                                 'Total Study Hours'}
                            </p>
                        </div>
                    </div>
                    
                    {/* Performance Metrics */}
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                        <div className="glass-card p-6">
                            <h3 className="text-xl font-bold mb-6">Learning Efficiency</h3>
                            <div className="space-y-4">
                                <div>
                                    <div className="flex justify-between mb-2">
                                        <span className="text-gray-400">Cards/Hour</span>
                                        <span className="font-bold">{(masteredCards / Math.max(userProgress.studyTime / 60, 1)).toFixed(1)}</span>
                                    </div>
                                    <div className="w-full bg-gray-800 rounded-full h-2">
                                        <div
                                            className="h-2 rounded-full bg-[#7FFFD4]"
                                            style={{ width: `${Math.min((masteredCards / Math.max(userProgress.studyTime / 60, 1)) / 10 * 100, 100)}%` }}
                                        ></div>
                                    </div>
                                </div>
                                
                                <div>
                                    <div className="flex justify-between mb-2">
                                        <span className="text-gray-400">XP/Hour</span>
                                        <span className="font-bold">{(userProgress.totalXP / Math.max(userProgress.studyTime / 60, 1)).toFixed(0)}</span>
                                    </div>
                                    <div className="w-full bg-gray-800 rounded-full h-2">
                                        <div
                                            className="h-2 rounded-full bg-[#6EC1E4]"
                                            style={{ width: `${Math.min((userProgress.totalXP / Math.max(userProgress.studyTime / 60, 1)) / 100 * 100, 100)}%` }}
                                        ></div>
                                    </div>
                                </div>
                                
                                <div>
                                    <div className="flex justify-between mb-2">
                                        <span className="text-gray-400">Retention Rate</span>
                                        <span className="font-bold">{((masteredCards / courseData.flashcards.length) * 100).toFixed(0)}%</span>
                                    </div>
                                    <div className="w-full bg-gray-800 rounded-full h-2">
                                        <div
                                            className="h-2 rounded-full bg-[#B57EDC]"
                                            style={{ width: `${(masteredCards / courseData.flashcards.length) * 100}%` }}
                                        ></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div className="glass-card p-6">
                            <h3 className="text-xl font-bold mb-6">Study Recommendations</h3>
                            <div className="space-y-4">
                                {[
                                    { 
                                        title: 'Focus on Weak Topics', 
                                        description: 'Review topics with lowest completion rates',
                                        priority: 'high',
                                        action: 'Review Now'
                                    },
                                    { 
                                        title: 'Daily Flashcards', 
                                        description: 'Complete 10 flashcards daily to maintain streak',
                                        priority: 'medium',
                                        action: 'Start Session'
                                    },
                                    { 
                                        title: 'Weekly Quiz', 
                                        description: 'Take a quiz to test your knowledge',
                                        priority: 'low',
                                        action: 'Take Quiz'
                                    }
                                ].map((rec, index) => (
                                    <div key={index} className="p-4 rounded-xl bg-gray-800/50">
                                        <div className="flex justify-between items-start mb-2">
                                            <div>
                                                <p className="font-bold">{rec.title}</p>
                                                <p className="text-sm text-gray-400">{rec.description}</p>
                                            </div>
                                            <span className={`text-xs px-2 py-1 rounded ${
                                                rec.priority === 'high' ? 'bg-red-900/30 text-red-400' :
                                                rec.priority === 'medium' ? 'bg-yellow-900/30 text-yellow-400' :
                                                'bg-blue-900/30 text-blue-400'
                                            }`}>
                                                {rec.priority}
                                            </span>
                                        </div>
                                        <button className="w-full mt-3 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-sm">
                                            {rec.action}
                                        </button>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            )}
        </div>
    );
}

// Initialize the app
ReactDOM.render(<App />, document.getElementById('root'));
];
</script>
</body>
</html>
